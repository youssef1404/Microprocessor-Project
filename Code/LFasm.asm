ORG 00H

MOV P2, #0FFH   ; IR-INPUT S1-P2.1  /  S2- P2.2  / S3-P2.3
MOV P2, #00H     ; CLEAR VALUES IN P2
MOV P1, #00H    ; FORWARD-BACKWARD O/P  MOTOR1: P1.1(F) / P1.2 (B)  - MOTOR2: P1.3 (F) - P1.4 (B)
MOV P3, #00H   ; ENABLE A, B O/P P1.1-P1.2

MOV P3, #00000110B ; ENABLE BOTH MOTORS
MOV R5, P2

MAIN:
        CJNE R5, #00000100B, CASE2  ; SENSORS 0 1 0
	ACALL FORWARD
SJMP MAIN

CASE2:
   CJNE R5, #00001100B, CASE3  ; SENSORS 1 1 0
   ACALL DLEFT
SJMP MAIN

CASE3:
   CJNE R5, #00001000B, CASE4   ; SENSORS 1 0 0
   ACALL LEFT
SJMP MAIN

CASE4:
   CJNE R5, #00000110B, CASE5   ; SENSORS 0 1 1
   ACALL DRIGHT
SJMP MAIN

CASE5:
   CJNE R5, #0000001B, CASE6   ; SENSORS 0 0 1
   ACALL RIGHT
SJMP MAIN

CASE6:
	 CJNE R5, #00001110B, MAIN  ; SENSORS 1 1 1
	 ACALL STOP
SJMP MAIN


FORWARD:
      SETB P1.1  ;MOTOR 1 (R)
      CLR P1.2    ; MOTOR 1 (R)
      SETB P1.3  ; MOTOR 2 (L)
      CLR P1.4    ; MOTOR 2 (L)
RET

BACKWARD:
      CLR P1.1  ;MOTOR 1 (R)
      SETB P1.2    ; MOTOR 1 (R)
      CLR P1.3  ; MOTOR 2 (L)
      SETB P1.4    ; MOTOR 2 (L)
RET

LEFT:
      SETB P1.1  ;MOTOR 1 (R)
      CLR P1.2    ; MOTOR 1 (R)
      CLR P1.3  ; MOTOR 2 (L)
      CLR P1.4    ; MOTOR 2 (L)
RET

DLEFT:
      SETB P1.1  ;MOTOR 1 (R)
      CLR P1.2    ; MOTOR 1 (R)
      CLR P1.3  ; MOTOR 2 (L)
      SETB P1.4    ; MOTOR 2 (L)
RET

RIGHT:
      CLR P1.1  ;MOTOR 1 (R)
      CLR P1.2    ; MOTOR 1 (R)
      SETB P1.3  ; MOTOR 2 (L)
      CLR P1.4    ; MOTOR 2 (L)
RET

DRIGHT:
      CLR P1.1  ;MOTOR 1 (R)
      SETB P1.2    ; MOTOR 1 (R)
      SETB P1.3  ; MOTOR 2 (L)
      CLR P1.4    ; MOTOR 2 (L)
RET


STOP:
      MOV P1, #00H
RET

END
